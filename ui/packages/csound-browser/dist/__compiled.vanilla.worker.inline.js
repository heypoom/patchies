export default () =>
  (window.URL || window.webkitURL).createObjectURL(
    new Blob([
      '(function(){/*\n\n Copyright The Closure Library Authors.\n SPDX-License-Identifier: Apache-2.0\n*/\nvar m,q=this||self;function t(a,b){a=a.split(".");var c=q;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b}function A(a,b){D.prototype[a]=b};const aa=Symbol("Comlink.proxy"),ba=Symbol("Comlink.endpoint"),da=Symbol("Comlink.releaseProxy"),ea=Symbol("Comlink.thrown"),fa=a=>"object"==typeof a&&null!==a||"function"==typeof a,ja=new Map([["proxy",{N:a=>fa(a)&&a[aa],X(a){const {port1:b,port2:c}=new MessageChannel;return ha(a,b),[c,[c]]},O:a=>(a.start(),ia(a))}],["throw",{N:a=>fa(a)&&ea in a,X({value:a}){let b;return b=a instanceof Error?{S:!0,value:{message:a.message,name:a.name,stack:a.stack}}:{S:!1,value:a},[b,[]]},O(a){if(a.S)throw Object.assign(Error(a.value.message),\na.value);throw a.value;}}]]);\nfunction ha(a,b=self){b.addEventListener("message",function e(d){if(d&&d.data){var f=d.data.argumentList,{id:g,type:h,path:k}=Object.assign({path:[]},d.data);f=(f||[]).map(F);try{const n=k.slice(0,-1).reduce((p,r)=>p[r],a),v=k.reduce((p,r)=>p[r],a);switch(h){case "GET":var l=v;break;case "SET":n[k.slice(-1)[0]]=F(d.data.value);l=!0;break;case "APPLY":l=v.apply(n,f);break;case "CONSTRUCT":l=Object.assign(new v(...f),{[aa]:!0});break;case "ENDPOINT":const {port1:p,port2:r}=new MessageChannel;ha(a,r);\nl=ka(p,[p]);break;case "RELEASE":l=void 0;break;default:return}}catch(n){l={value:n,[ea]:0}}Promise.resolve(l).catch(n=>({value:n,[ea]:0})).then(n=>{const [v,p]=la(n);n={...v};n.id=g;b.postMessage(n,p);"RELEASE"===h&&(b.removeEventListener("message",e),ma(b))})}});b.start&&b.start()}function ma(a){"MessagePort"===a.constructor.name&&a.close()}\nfunction ia(a){return function f(c,d=[],e=function(){}){let g=!1;const h=new Proxy(e,{get(k,l){if(na(g),l===da)return()=>G(c,{type:"RELEASE",path:d.map(n=>n.toString())}).then(()=>{ma(c);g=!0});if("then"===l){if(0===d.length)return{then:()=>h};k=G(c,{type:"GET",path:d.map(n=>n.toString())}).then(F);return k.then.bind(k)}return f(c,[...d,l])},set(k,l,n){na(g);const [v,p]=la(n);return G(c,{type:"SET",path:[...d,l].map(r=>r.toString()),value:v},p).then(F)},apply(k,l,n){na(g);k=d[d.length-1];if(k===ba)return G(c,\n{type:"ENDPOINT"}).then(F);if("bind"===k)return f(c,d.slice(0,-1));const [v,p]=oa(n);n={type:"APPLY"};n.path=d.map(r=>r.toString());n.argumentList=v;return G(c,n,p).then(F)},construct(k,l){na(g);const [n,v]=oa(l);k={type:"CONSTRUCT"};k.path=d.map(p=>p.toString());k.argumentList=n;return G(c,k,v).then(F)}});return h}(a,[],void 0)}function na(a){if(a)throw Error("Proxy has been released and is not useable");}\nfunction oa(a){a=a.map(la);const b=(c=a.map(d=>d[1]),Array.prototype.concat.apply([],c));return[a.map(d=>d[0]),b];var c}const pa=new WeakMap;function ka(a,b){return pa.set(a,b),a}function la(a){for(const [b,c]of ja)if(c.N(a)){const [d,e]=c.X(a);return[{type:"HANDLER",name:b,value:d},e]}return[{type:"RAW",value:a},pa.get(a)||[]]}function F(a){switch(a.type){case "HANDLER":return ja.get(a.name).O(a.value);case "RAW":return a.value}}\nfunction G(a,b,c){return new Promise(d=>{const e=Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");a.addEventListener("message",function h(g){g.data&&g.data.id&&g.data.id===e&&(a.removeEventListener("message",h),d(g.data))});a.start&&a.start();b.id=e;a.postMessage(b,c)})};function qa(){}m=qa.prototype;m.aa=!1;m.port=void 0;m.K=()=>{};m.o=()=>{};m.C=void 0;let H,ra,sa;H=()=>()=>{};ra=()=>()=>{};sa=()=>{};const ta=(a,b,c,d)=>e=>{const f=e.csound,g=1===b.csoundShouldDaemonize(f);if(g){var h=b.csoundSetOption(f,"--daemon");0!==h&&console.error("csoundSetOption daemon failed:",h);h=b.csoundSetOption(f,"-odac");0!==h&&console.error("csoundSetOption odac failed:",h)}h=b.csoundStart(f);const k=b.csoundGetOutputName(f)||"test.wav";ra()();0!==h&&a.K(`error: csoundStart failed while trying to render ${k},`+" look out for errors in options and syntax");setTimeout(()=>{const l=b._isRequestingRtMidiInput(f);if(g||\nl||k.includes("dac"))c(e);else if(a.o("renderStarted"),d)d(e);else for(;0===b.csoundPerformKsmps(f););},0);return h},ua=(a,b)=>{const c=[];for(let d=0;d<a;d++)c.push(new Float64Array(b));return c},va=({H:a,M:b})=>async c=>{c=c.csound;const d=a.csoundGetKr(c);let e=0,f=0;for(;"renderStarted"===b.C&&0===e;)e=a.csoundPerformKsmps(c),f+=1,"function"===typeof setTimeout&&0===e&&0===f%(2*d)&&await new Promise(g=>setTimeout(g,0));b.o("renderEnded")};const wa=a=>()=>a.exports.csoundCreateWasi();wa.toString=()=>"create = async () => undefined;";const xa=a=>b=>a.exports.csoundDestroy(b);xa.toString=()=>"destroy = async () => undefined;";const ya=a=>()=>a.exports.csoundGetAPIVersion();ya.toString=()=>"getAPIVersion = async () => Number;";const za=a=>()=>a.exports.csoundGetVersion();za.toString=()=>"getVersion = async () => Number;";const Aa=a=>(b,c)=>a.exports.csoundInitialize(c);Aa.toString=()=>"initialize = async () => Number;";const I=new TextDecoder("utf8"),J=new TextEncoder("utf8");const K=a=>{const b=a.indexOf("\\x00");return-1<b?a.substr(0,b):a};const N=(a,b)=>{a.exports.freeStringMem(b)},O=(a,b)=>{if("string"!==typeof b)console.error("Expected string but got",typeof b);else{b=J.encode(b);var c=a.exports.allocStringMem(b.length);(new Uint8Array(a.i.memory.buffer,c,b.length+1)).set(b);return c}};const Ba=a=>(b,c)=>{c=O(a,c);b=a.exports.csoundParseOrc(b,c);N(a,c);return b};Ba.toString=()=>"parseOrc = async (orchestra) => Object;";const Ca=a=>(b,c)=>a.exports.csoundCompileTree(b,c);Ca.toString=()=>"compileTree = async (tree) => Number;";const Da=a=>(b,c)=>{c=O(a,c);b=a.exports.csoundCompileOrc(b,c);N(a,c);return b};Da.toString=()=>"compileOrc = async (orchestra) => Number;";const Ea=a=>(b,c)=>{c=O(a,c);b=a.exports.csoundEvalCode(b,c);N(a,c);return b};Ea.toString=()=>"csoundEvalCode = async (orchestra) => Number;";\nconst Fa=a=>b=>a.exports.csoundStartWasi(b);Fa.toString=()=>"start = async () => Number;";const Ga=a=>(b,c,d=1)=>{c=O(a,c);b=a.exports.csoundCompileCSD(b,c,d,0);N(a,c);return b};Ga.toString=()=>"compileCSD = async (csoundDocument) => Number;";const Ha=a=>b=>a.exports.csoundPerformKsmpsWasi(b);Ha.toString=()=>"performKsmps = async (csound) => Number;";const Ja=()=>()=>{};Ja.toString=()=>"stop = async () => undefined;";const Ka=a=>b=>a.exports.csoundResetWasi(b);Ka.toString=()=>"reset = async () => Number;";const La=[["device_name","char",64],["interface_name","char",64],["device_id","char",64],["midi_module","char",64],["isOutput","int"]],Ma=[["type","int"],["lexme","ptr"],["value","int"],["fvalue","double"],["optype","ptr"],["next","ptr"]],Na=[["type","int"],["value","ptr"],["rate","int"],["len","int"],["line","int"],["locn","uint64"],["left","ptr"],["right","ptr"],["next","ptr"],["markup","ptr"]];const Oa={sb:4,Gb:8,$a:8,char:1,pb:8,Cb:4,Hb:8},P=a=>a?a.reduce((b,[,c])=>Oa[c]?Oa[c]+b:P({bb:Na,ab:Ma}[c])+b,0):0;P(Na);P(Ma);\nP([["debug_mode","int"],["buffer_frames","int"],["hardware_buffer_frames","int"],["displays","int"],["ascii_graphs","int"],["postscript_graphs","int"],["message_level","int"],["tempo","int"],["ring_bell","int"],["use_cscore","int"],["terminate_on_midi","int"],["heartbeat","int"],["defer_gen01_load","int"],["midi_key","int"],["midi_key_cps","int"],["midi_key_oct","int"],["midi_key_pch","int"],["midi_velocity","int"],["midi_velocity_amp","int"],["no_default_paths","int"],["number_of_threads","int"],\n["syntax_check_only","int"],["csd_line_counts","int"],["compute_weights","int"],["realtime_mode","int"],["sample_accurate","int"],["sample_rate_override","MYFLT"],["control_rate_override","MYFLT"],["nchnls_override","int"],["nchnls_i_override","int"],["e0dbfs_override","MYFLT"],["daemon","int"],["ksmps_override","int"],["FFT_library","int"]]);const Pa=P(La);const Qa=a=>{const [b]=La.reduce(([c,d],[e,f,...g])=>{g="char"===f?Oa[f]*g[0]:Oa[f];f="char"===f?K(I.decode(a.subarray(d,g)))||"":a[d];c[e]=f;return[c,d+g]},[{},0]);return b};const Ra=a=>b=>a.exports.csoundGetSr(b);Ra.toString=()=>"getSr = async () => Number;";const Sa=a=>(b,c)=>a.exports.csoundSystemSr(b,c);Sa.toString=()=>"systemSr = async (val) => Number;";const Ta=a=>b=>a.exports.csoundGetKr(b);Ta.toString=()=>"getKr = async () => Number;";const Ua=a=>b=>a.exports.csoundGetKsmps(b);Ua.toString=()=>"getKsmps = async () => Number;";Ua.toString=()=>"getChannels = async (isInput) => Number;";const Va=a=>b=>a.exports.csoundGetChannels(b,0);Va.toString=()=>"getNchnls = async () => Number;";\nconst Wa=a=>b=>a.exports.csoundGetChannels(b,1);Wa.toString=()=>"getNchnlsInput = async () => Number;";const Xa=a=>b=>a.exports.csoundGet0dBFS(b);Xa.toString=()=>"get0dBFS = async () => Number;";const Ya=a=>b=>a.exports.csoundGetA4(b);Ya.toString=()=>"getA4 = async () => Number;";const Za=a=>b=>a.exports.csoundGetCurrentTimeSamples(b);Za.toString=()=>"getCurrentTimeSamples = async () => Number;";const $a=a=>b=>a.exports.csoundGetSizeOfMYFLT(b);$a.toString=()=>"getSizeOfMYFLT = async () => Number;";\nconst ab=a=>(b,c)=>{c=O(a,c);b=a.exports.csoundSetOption(b,c);N(a,c);return b};ab.toString=()=>"setOption = async (option) => Number;";const bb=a=>b=>a.exports.csoundGetDebug(b);bb.toString=()=>"getDebug = async () => Number;";const cb=a=>(b,c)=>{a.exports.csoundSetDebug(b,c)};cb.toString=()=>"setDebug = async (number) => undefined;";const db=a=>b=>a.exports.csoundGetSpin(b);db.toString=()=>"getSpin = async (csound) => Number;";const eb=a=>b=>a.exports.csoundGetSpout(b);eb.toString=()=>"getSpout = async () => Number;";const fb=a=>{const b=[];for(let c=0;c<a;c++)b.push(c);return b};const gb=a=>(b,c)=>{const d=a.i.memory.buffer,e=a.exports.csoundGetMIDIDevList(b,void 0,c?1:0);if(0===e)return[];const f=a.exports.allocCsMidiDeviceStruct(e);a.exports.csoundGetMIDIDevList(b,f,c?1:0);const g=new Uint8Array(d,f,Pa*e);b=fb(e).map(h=>Qa(g.subarray(h*Pa,Pa)));a.exports.freeCsMidiDeviceStruct(f);return b};gb.toString=()=>"getMIDIDevList = async (isOutput) => Object;";const hb=a=>b=>{var c=a.i.memory.buffer;b=a.exports.getRtMidiName(b);c=new Uint8Array(c,b,128);return K(I.decode(c))||""};\nhb.toString=()=>"getRtMidiName = async () => String;";const ib=a=>(b,c,d,e)=>{a.exports.pushMidiMessage(b,c,d,e)};ib.toString=()=>"midiMessage = async (status, data1, data2) => undefined;";const jb=a=>(b,c)=>{c=O(a,c);b=a.exports.csoundEventString(b,c,0);N(a,c);return b};jb.toString=()=>"inputMessage = async (scoreEvent) => Number;";const kb=a=>(b,c)=>{c=O(a,c);b=a.exports.csoundEventString(b,c,1);N(a,c);return b};kb.toString=()=>"inputMessageAsync = async (scoreEvent) => Number;";const lb=a=>(b,c)=>{c=O(a,c);b=a.exports.csoundGetControlChannelWasi(b,c);N(a,c);return b};lb.toString=()=>"getControlChannel = async (channelName) => Number;";\nconst mb=a=>(b,c,d)=>{c=O(a,c);a.exports.csoundSetControlChannel(b,c,d);N(a,c)};mb.toString=()=>"setControlChannel = async (channelName, value) => void;";const nb=a=>(b,c)=>{c=O(a,c);b=a.exports.csoundGetStringChannelWasi(b,c);var d=new Uint8Array(a.i.memory.buffer,b);d=I.decode(d);d=K(d);N(a,c);N(a,b);return d};nb.toString=()=>"getStringChannel = async (channelName) => String;";const ob=a=>(b,c,d)=>{c=O(a,c);d=O(a,d);a.exports.csoundSetStringChannel(b,c,d);N(a,c);N(a,d)};ob.toString=()=>"setStringChannel = async (channelName, value) => void;";const pb=a=>b=>{var c=a.i.memory.buffer;b=a.exports.csoundGetOutputName(b);c=new Uint8Array(c,b,64);return K(I.decode(c))||""};pb.toString=()=>"getOutputName = async () => String;";const qb=a=>b=>{var c=a.i.memory.buffer;b=a.exports.csoundGetInputName(b);c=new Uint8Array(c,b,64);return K(I.decode(c))||""};qb.toString=()=>"getInputName = async (csound) => String;";const rb=a=>(b,c,d)=>{c=O(a,c);d=O(a,d);b=a.exports.csoundAppendEnv(b,c,d);N(a,c);N(a,d);return b};rb.toString=()=>"appendEnv = async (csound, variable, value) => Number;";const sb=a=>b=>a.exports.csoundIsScorePending(b);sb.toString=()=>"isScorePending = async () => Number;";const tb=a=>(b,c)=>a.exports.csoundSetScorePending(b,c);tb.toString=()=>"setScorePending = async (pending) => Number;";const ub=a=>(b,c)=>{c=O(a,c);b=a.exports.csoundEventString(b,c,0);N(a,c);return b};ub.toString=()=>"readScore = async (score) => Number;";const vb=a=>b=>a.exports.csoundGetScoreTime(b);vb.toString=()=>"getScoreTime = async () => Number;";const wb=a=>b=>a.exports.csoundGetScoreOffsetSeconds(b);\nwb.toString=()=>"getScoreOffsetSeconds = async () => Number;";const xb=a=>(b,c)=>a.exports.csoundSetScoreOffsetSeconds(b,c);xb.toString=()=>"setScoreOffsetSeconds = async () => Number;";const yb=a=>b=>a.exports.csoundRewindScore(b);yb.toString=()=>"rewindScore = async () => undefined;";const zb=a=>(b,c)=>a.exports.csoundTableLength(b,c);zb.toString=()=>"tableLength = async (tableNum) => Number;";const Ab=a=>(b,c,d)=>{const e=a.exports.allocFloatArray(d.length);(new Float64Array(a.i.memory.buffer,e,d.length)).set(d);a.exports.csoundTableCopyIn(b,c,e);a.exports.freeFloatArrayMem(e)};Ab.toString=()=>"tableCopyIn = async (tableNum, float64Array) => undefined;";\nconst Q=a=>(b,c)=>{var d=a.exports.csoundTableLength(b,c);if(0<d){const e=a.exports.allocFloatArray(d);a.exports.csoundTableCopyOut(b,c,e);b=new Float64Array(a.i.memory.buffer,e,d);c=new Float64Array(b.length);for(d=0;d<b.length;d++)c[d]=b[d];a.exports.freeFloatArrayMem(e);return c}};Q.toString=()=>"tableCopyOut = async (tableNum) => ?Float64Array;";Q.toString=Q.toString;\nconst Bb=a=>(b,c)=>{const d=a.exports.allocFloatArray(1024);a.exports.csoundGetTableArgs(b,d,c);b=new Float64Array(a.i.memory.buffer,d,1024);a.exports.freeFloatArrayMem(d);return b};Bb.toString=()=>"getTableArgs = async (tableNum) => ?Float64Array;";function Cb(a){return(b,c,d)=>{b="string"===typeof d?J.encode(d):d;a.i.writeFile(c,b)}}t("writeFile$$module$src$filesystem$worker_fs",Cb);Cb.toString=()=>"async (path, data) => void";function Db(a){return(b,c,d)=>{b="string"===typeof d?J.encode(d):d;a.i.appendFile(c,b)}}t("appendFile$$module$src$filesystem$worker_fs",Db);Db.toString=()=>"async (path, data) => void";function Eb(a){return(b,c)=>a.i.readFile(c)}t("readFile$$module$src$filesystem$worker_fs",Eb);Eb.toString=()=>"async (path) => ?Uint8Array";\nfunction Fb(a){return(b,c)=>a.i.unlink(c)}t("unlink$$module$src$filesystem$worker_fs",Fb);Fb.toString=()=>"async (path) => void";function Gb(a){return(b,c)=>a.i.readdir(c)}t("readdir$$module$src$filesystem$worker_fs",Gb);Gb.toString=()=>"async (path) => string[]";function Hb(a){return(b,c)=>a.i.mkdir(c)}t("mkdir$$module$src$filesystem$worker_fs",Hb);Hb.toString=()=>"async (path) => void";function Ib(a){return(b,c)=>a.i.stat(c)}t("stat$$module$src$filesystem$worker_fs",Ib);Ib.toString=()=>"async (path) => ?object";\nfunction Jb(a){return(b,c)=>Kb(a.i,c)}t("pathExists$$module$src$filesystem$worker_fs",Jb);Jb.toString=()=>"async (path) => boolean";function Lb(a){return(b,c)=>Mb(a.i,c)}t("chdir$$module$src$filesystem$worker_fs",Lb);Lb.toString=()=>"async (path) => number";function Nb(a){return()=>a.i.cwd}t("getcwd$$module$src$filesystem$worker_fs",Nb);Nb.toString=()=>"async () => string";const R={};R.writeFile=Cb;R.appendFile=Db;R.readFile=Eb;R.unlink=Fb;R.readdir=Gb;R.mkdir=Hb;R.stat=Ib;R.pathExists=Jb;\nR.chdir=Lb;R.getcwd=Nb;const Ob={csoundCreate:wa,csoundDestroy:xa,csoundGetAPIVersion:ya,csoundGetVersion:za,csoundInitialize:Aa,csoundParseOrc:Ba,csoundCompileTree:Ca,csoundCompileOrc:Da,csoundEvalCode:Ea,csoundStart:Fa,csoundCompileCSD:Ga,csoundPerformKsmps:Ha,csoundStop:Ja,csoundReset:Ka,csoundGetSr:Ra,kb:Sa,csoundGetKr:Ta,csoundGetKsmps:Ua,csoundGetNchnls:Va,csoundGetNchnlsInput:Wa,ib:a=>(b,c)=>a.exports.csoundGetChannels(b,c),csoundGet0dBFS:Xa,csoundGetA4:Ya,csoundGetCurrentTimeSamples:Za,csoundGetSizeOfMYFLT:$a,csoundSetOption:ab,\ncsoundGetDebug:bb,csoundSetDebug:cb,csoundGetSpin:db,csoundGetSpout:eb,csoundGetMIDIDevList:gb,csoundSetMidiCallbacks:a=>b=>{a.exports.csoundSetMidiCallbacks(b)},csoundGetRtMidiName:hb,csoundGetMidiOutFileName:a=>b=>{var c=a.i.memory.buffer;b=a.exports.getMidiOutFileName(b);c=new Uint8Array(c,b,128);b&&0<b.length&&N(a,b);return K(I.decode(c))||""},csoundPushMidiMessage:ib,_isRequestingRtMidiInput:a=>b=>a.exports.isRequestingRtMidiInput(b),csoundInputMessage:jb,csoundInputMessageAsync:kb,csoundGetControlChannel:lb,\ncsoundSetControlChannel:mb,csoundGetStringChannel:nb,csoundSetStringChannel:ob,csoundGetInputName:qb,csoundGetOutputName:pb,csoundAppendEnv:rb,csoundShouldDaemonize:a=>b=>a.exports.csoundShouldDaemonize(b),csoundIsScorePending:sb,csoundSetScorePending:tb,csoundReadScore:ub,csoundGetScoreTime:vb,csoundGetScoreOffsetSeconds:wb,csoundSetScoreOffsetSeconds:xb,csoundRewindScore:yb,csoundTableLength:zb,csoundTableCopyIn:Ab,csoundTableCopyOut:Q,csoundGetTable:Q,csoundGetTableArgs:Bb,fs:R};\nfunction Pb(a){const {fs:b,...c}=Ob;return{...Object.keys(c).reduce((d,e)=>{d[e]=c[e](a);return d},{}),...Object.keys(b).reduce((d,e)=>{d[e]=b[e](a);return d},{})}};void 0!==q&&(q={});q.BigInt||(q.BigInt=void 0===BigInt?Number:BigInt);const Qb=q.BigInt(1)|q.BigInt(2)|q.BigInt(4)|q.BigInt(8)|q.BigInt(16)|q.BigInt(32)|q.BigInt(64)|q.BigInt(128)|q.BigInt(256)|q.BigInt(2097152)|q.BigInt(4194304)|q.BigInt(8388608)|q.BigInt(134217728),Rb=q.BigInt(0);function Sb(a){let b=arguments[0];for(let d=1;d<arguments.length;d++){const e=arguments[d];if(0==e.lastIndexOf("/",0))b=e;else{var c;(c=""==b)||(c=b.length-1,c=0<=c&&b.indexOf("/",c)==c);c?b+=e:b+="/"+e}}return b};function Tb(a){return a?a.split("/").filter(b=>0<b.length&&"."!==b):[]}function S(a){if(!a)return"/";const b=[];Tb(a).forEach(c=>{".."===c?0<b.length&&b.pop():b.push(c)});return 0<b.length?`/${b.join("/")}`:"/"}function T(a,b){if(!b||"."===b)return S(a||"/");if(/^\\//.test(b))return S(b);a=Tb(a||"/");b=b.split("/");const c=[...a];b.forEach(d=>{d&&"."!==d&&(".."===d?0<c.length&&c.pop():c.push(d))});return 0<c.length?`/${c.join("/")}`:"/"}\nfunction Ub(){return"undefined"===typeof performance||"undefined"===typeof performance.now?Date.now()-Date.now():performance.now()}function Vb(a){var b=a.reduce((d,e)=>d+e.length,0);if(0!==a.length){b=new Uint8Array(b);var c=0;for(const d of a)b.set(d,c),c+=d.length;return b}}\nfunction D(){var {V:a}={V:{"/":"/"}};this.fd=Array.from({length:4});this.fd[0]={fd:0,path:"/dev/stdin",seekPos:q.BigInt(0),buffers:[]};this.fd[1]={fd:1,path:"/dev/stdout",seekPos:q.BigInt(0),buffers:[]};this.fd[2]={fd:2,path:"/dev/stderr",seekPos:q.BigInt(0),buffers:[]};this.fd[3]={fd:3,path:"/",seekPos:q.BigInt(0),buffers:[],type:"dir"};this.h=this.h.bind(this);this.g=0;this.cwd="/";this.V=a||{}}D.prototype.start=function(a){this.g=Ub();a.exports._start()};\nfunction Wb(a,b){const c={};b=WebAssembly.Module.imports(b);for(const d of b)"function"===d.kind&&d.module.startsWith("wasi_")&&("object"!==typeof c[d.module]&&(c[d.module]={}),c[d.module][d.name]=a[d.name].bind(a));return c}D.prototype.h=function(){this.view&&this.view.buffer&&this.view.buffer.byteLength||(this.view=new DataView(this.memory.buffer));return this.view};function Xb(a,b){b=S(b);a=Object.values(a.fd);for(const c of a)if(c&&c.path===b)return c;return null}\nfunction Mb(a,b){b=S(T(a.cwd,b));if("/"===b)return a.cwd="/",a.fd[3]&&(a.fd[3].path="/",a.fd[3].type="dir"),0;const c=Xb(a,b);if(!c)return 44;if(c.type&&"dir"!==c.type)return 54;a.cwd=b;a.fd[3]&&(a.fd[3].path=b,a.fd[3].type="dir");return 0}function Yb(a){const b=Math.trunc(a);return q.BigInt(b)*q.BigInt(1E6)+q.BigInt(Math.round(1E6*(a-b)))}function Zb(a,b){switch(b){case 1:return Math.floor(Ub());case 0:return Yb(Date.now());case 2:case 3:return Math.floor(Ub()-a.g);default:return 0}}\nD.prototype.ca=function(){return 0};A("args_get",D.prototype.ca);D.prototype.da=function(){return 0};A("args_sizes_get",D.prototype.da);D.prototype.ga=function(){return 0};A("clock_res_get",D.prototype.ga);D.prototype.ha=function(a,b,c){this.h().setBigUint64(c,q.BigInt(Zb(this,a)),!0);return 0};A("clock_time_get",D.prototype.ha);D.prototype.ia=function(){return 0};A("environ_get",D.prototype.ia);D.prototype.ja=function(){return 0};A("environ_sizes_get",D.prototype.ja);D.prototype.ka=function(){return 52};\nA("fd_advise",D.prototype.ka);D.prototype.la=function(){return 52};A("fd_allocate",D.prototype.la);D.prototype.ma=function(){return 0};A("fd_close",D.prototype.ma);D.prototype.na=function(){return 0};A("fd_datasync",D.prototype.na);D.prototype.oa=function(a,b){a=this.h();a.setUint8(b+4,4);a.setUint16(b+2,0,!0);a.setUint16(b+4,0,!0);a.setBigUint64(b+8,q.BigInt(Qb),!0);a.setBigUint64(b+8+8,q.BigInt(Rb),!0);return 0};A("fd_fdstat_get",D.prototype.oa);D.prototype.pa=function(){return 52};\nA("fd_fdstat_set_flags",D.prototype.pa);D.prototype.qa=function(){return 0};A("fd_fdstat_set_rights",D.prototype.qa);\nD.prototype.ra=function(a,b){let c=0;this.fd[a]&&(c=this.fd[a].buffers.reduce(function(e,f){return e+(null==f?void 0:f.byteLength)?null==f?void 0:f.byteLength:0},0));const d=this.h();d.setBigUint64(b,q.BigInt(a),!0);b+=8;d.setBigUint64(b,q.BigInt(a),!0);b+=8;d.setUint8(b,4);b+=8;d.setBigUint64(b,q.BigInt(1),!0);b+=8;d.setBigUint64(b,q.BigInt(c),!0);b+=8;d.setBigUint64(b,Yb(this.g),!0);b+=8;d.setBigUint64(b,Yb(this.g),!0);d.setBigUint64(b+8,Yb(this.g),!0);return 0};A("fd_filestat_get",D.prototype.ra);\nD.prototype.sa=function(){return 0};A("fd_filestat_set_size",D.prototype.sa);D.prototype.ta=function(){return 0};A("fd_filestat_set_times",D.prototype.ta);D.prototype.ua=function(){return 0};A("fd_pread",D.prototype.ua);D.prototype.va=function(a,b){if(!this.fd[a]&&!this.fd[a-1])return 8;var {path:c}=this.fd[a];a=this.h();c=J.encode(c);(new Uint8Array(a.buffer)).set(c,b);return 0};A("fd_prestat_dir_name",D.prototype.va);\nD.prototype.wa=function(a,b){if(!this.fd[a])return 8;var {path:c}=this.fd[a];a=this.h();c=J.encode(c);a.setUint8(b,0);a.setUint32(b+4,c.byteLength,!0);return 0};A("fd_prestat_get",D.prototype.wa);D.prototype.xa=function(a,b,c,d,e){console.log("fd_pwrite",a,b,c,d,e,arguments);return 0};A("fd_pwrite",D.prototype.xa);\nD.prototype.ya=function(a,b,c,d){const e=this.h();a=this.fd[a];if(!a||!Array.isArray(a.buffers))return e.setUint32(d,0,!0),8;const f=a.buffers;if(0===f.length)return e.setUint32(d,0,!0),a.seekPos=q.BigInt(0),0;var g=f.reduce((v,p)=>v+p.length,0);let h=Number(a.seekPos),k=0,l=!1;if(h>=g)return b=e.getUint32(b,!0),e.setUint8(b,0),e.setUint32(d,0,!0),0;for(g=0;g<c;g++){var n=b+8*g;const v=e.getUint32(n,!0);n=e.getUint32(n+4,!0);l||(k+=n,Array.from({length:n},(p,r)=>r).reduce((p,r)=>{if(l)return p;const [y,\nB]=p;let C=p=0,w=!1,u=0,z;if(0===r)for(;!w;)z=f[p]?f[p].byteLength:0,u<=h&&z+u>h?(w=!0,C=h-u):(u+=z,p+=1);else p=y,C=B;f[p]?(e.setUint8(v+r,f[p][C]),C+1>=f[p].byteLength?(p=y+1,C=0):C+=1):(e.setUint8(v+r,0),h+=r,l=!0);return[p,C]},[0,0]),l||(h+=n))}a.seekPos=q.BigInt(h);e.setUint32(d,k,!0);return 0};A("fd_read",D.prototype.ya);D.prototype.za=function(){return 0};A("fd_readdir",D.prototype.za);D.prototype.Aa=function(){return 0};A("fd_renumber",D.prototype.Aa);\nD.prototype.Ba=function(a,b,c,d){const e=this.h();switch(c){case 1:let f;this.fd[a].seekPos=(null!=(f=this.fd[a].seekPos)?f:q.BigInt(0))+q.BigInt(b);break;case 2:c=(this.fd[a].buffers||[]).reduce((g,h)=>g+h.length,0);this.fd[a].seekPos=BigInt(c)+BigInt(b);break;case 0:this.fd[a].seekPos=BigInt(b)}e.setBigUint64(d,this.fd[a].seekPos,!0);return 0};A("fd_seek",D.prototype.Ba);D.prototype.Ca=function(){return 0};A("fd_sync",D.prototype.Ca);\nD.prototype.Da=function(a,b){const c=this.h();this.fd[a].seekPos||(this.fd[a].seekPos=q.BigInt(0));c.setBigUint64(b,this.fd[a].seekPos,!0);return 0};A("fd_tell",D.prototype.Da);\nD.prototype.Ea=function(a,b,c,d){let e=!1;const f=this.h();this.fd[a].buffers=this.fd[a].buffers||[];this.fd[a].seekPos===q.BigInt(0)&&0<this.fd[a].buffers.length&&(e=!0);let g=0;for(let l=0;l<c;l++){var h=b+8*l,k=f.getUint32(h,!0);h=f.getUint32(h+4,!0);g+=h;k=new Uint8Array(f.buffer,k,h);e?this.fd[a].buffers.unshift(k.slice(0,h)):this.fd[a].buffers.push(k.slice(0,h))}this.fd[a].seekPos+=q.BigInt(g);f.setUint32(d,g,!0);[1,2].includes(a)&&console.log(I.decode(Vb(this.fd[a].buffers)));return 0};\nA("fd_write",D.prototype.Ea);D.prototype.Fa=function(){return 0};A("path_create_directory",D.prototype.Fa);D.prototype.Ga=function(){return 0};A("path_filestat_get",D.prototype.Ga);D.prototype.Ha=function(){return 0};A("path_filestat_set_times",D.prototype.Ha);D.prototype.Ia=function(){return 0};A("path_link",D.prototype.Ia);\nD.prototype.Ja=function(a,b,c,d,e,f,g,h,k){b=this.h();f=(this.fd[a]||{path:this.cwd}).path;c=new Uint8Array(b.buffer,c,d);c=I.decode(c);let l;3===a?l=T(this.cwd,c):l=S(Sb(f,c));if(l.startsWith("/..")||"/._"===l||"/.AppleDouble"===l)return 8;a=0!==(e&2);d=0!==(e&1);if((c=Xb(this,l))&&"dir"===c.type&&!a)return 31;if(!c&&a)return 44;if(!c&&!d&&!a)return b.setUint32(k,4294967295,!0),44;d=c?c.fd:this.fd.length;c||void 0!==this.fd[d]||(this.fd[d]={fd:d});c=c||this.fd[d]||{fd:d};this.fd[d]={...c,fd:d,path:l,\ntype:a?"dir":c.type||"file",seekPos:q.BigInt(0),buffers:Array.isArray(c.buffers)?c.buffers:[]};0===(e&8)||a||(this.fd[d].buffers.length=0);b.setUint32(k,d,!0);return 0};A("path_open",D.prototype.Ja);D.prototype.Ka=function(){return 0};A("path_readlink",D.prototype.Ka);D.prototype.La=function(){return 0};A("path_remove_directory",D.prototype.La);D.prototype.Ma=function(){return 0};A("path_rename",D.prototype.Ma);D.prototype.Na=function(){return 0};A("path_symlink",D.prototype.Na);D.prototype.Oa=function(){return 0};\nA("path_unlink_file",D.prototype.Oa);D.prototype.Pa=function(){return 0};A("poll_oneoff",D.prototype.Pa);D.prototype.Qa=function(){return 0};A("proc_exit",D.prototype.Qa);D.prototype.Ra=function(){return 0};A("proc_raise",D.prototype.Ra);D.prototype.Sa=function(){return 0};A("random_get",D.prototype.Sa);D.prototype.Ta=function(){return 0};A("sched_yield",D.prototype.Ta);D.prototype.Ua=function(){return 52};A("sock_recv",D.prototype.Ua);D.prototype.Va=function(){return 52};A("sock_send",D.prototype.Va);\nD.prototype.Wa=function(){return 52};A("sock_shutdown",D.prototype.Wa);function $b(a,b){return(a=Object.values(a.fd).find(({path:c})=>c===b))&&a.buffers}m=D.prototype;m.readdir=function(a){a=T(this.cwd,a);const b="/"===a?"/":`${a}/`,c=[];Object.values(this.fd).forEach(d=>{if(d&&d.path&&(d=d.path,d.startsWith(b))){var e=d.slice(b.length);0!==e.length&&(/\\//g.test(e)||c.push(d))}});return c.map(d=>d.replace(b,"").replace(/^\\//g,"")).filter(d=>!!d)};\nm.writeFile=function(a,b){const c=T(this.cwd,a);a=Object.keys(this.fd).length;const d=Object.values(this.fd).find(({path:e})=>e===c);this.fd[a]={fd:a,path:c,seekPos:q.BigInt(0),buffers:[b],type:"file"};d&&delete this.fd[d]};m.appendFile=function(a,b){var c=T(this.cwd,a);(c=$b(this,c))?c.push(b):console.error(`Can\'t append to non-existing file ${a}`)};m.readFile=function(a){a=T(this.cwd,a);if(a=$b(this,a))return Vb(a)};\nm.unlink=function(a){const b=T(this.cwd,a);(a=Object.values(this.fd).find(({path:c})=>c===b))?delete this.fd[a.fd]:console.error(`While trying to unlink ${b}, path not found`)};m.mkdir=function(a){const b=T(this.cwd,a),c=[];Object.values(this.fd).forEach(({path:d})=>d.startsWith(b)&&c.push(d));0<c.length?console.warn(`mkdir: path ${a} already exists`):(a=Object.keys(this.fd).length,this.fd[a]={fd:a,path:b,type:"dir"})};\nm.stat=function(a){const b=T(this.cwd,a);if(a=Object.values(this.fd).find(({path:e})=>e===b)){var c=(a.buffers||[]).reduce((e,f)=>e+((null==f?void 0:f.byteLength)||0),0),d="dir"===a.type;return{ob:0,rb:a.fd,mode:d?16877:33188,Bb:1,uid:0,qb:0,Db:0,size:c,hb:4096,D:Math.ceil(c/512),eb:this.g,zb:this.g,nb:this.g,gb:this.g,cb:new Date(this.g),yb:new Date(this.g),mb:new Date(this.g),fb:new Date(this.g),isFile:!d,isDirectory:d,tb:!1,ub:!1,xb:!1,vb:!1,wb:!1}}};\nfunction Kb(a,b){const c=T(a.cwd,b);return!!Object.values(a.fd).find(({path:d})=>d===c)};function U(a){for(;0<a.length;)a.pop()};/*\n zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */\nfunction V(a){const b=a.length;let c=0,d=Number.POSITIVE_INFINITY,e,f,g,h;let k,l;for(k=0;k<b;++k)a[k]>c&&(c=a[k]),a[k]<d&&(d=a[k]);const n=1<<c,v=new Uint32Array(n);e=1;f=0;for(g=2;e<=c;){for(k=0;k<b;++k)if(a[k]===e){h=0;var p=f;for(l=0;l<e;++l)h=h<<1|p&1,p>>=1;p=e<<16|k;for(l=h;l<n;l+=g)v[l]=p;++f}++e;f<<=1;g<<=1}return[v,c,d]};function ac(a,b){this.D=[];this.bufferSize=32768;this.l=this.B=this.j=this.J=0;this.A=new Uint8Array(a);this.W=!1;this.m=W;this.resize=!1;if(b||!(b={}))b.index&&(this.j=b.index),b.bufferSize&&(this.bufferSize=b.bufferSize),b.m&&(this.m=b.m),b.resize&&(this.resize=b.resize);switch(this.m){case bc:this.g=32768;this.h=new Uint8Array(this.bufferSize+33026);break;case W:this.g=0;this.h=new Uint8Array(this.bufferSize);break;default:throw Error("invalid inflate mode");}}\nvar bc=0,W=1,cc=new Uint16Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258]),ec=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0]),fc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577]),gc=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),\nhc;const ic=new Uint8Array(288);let X,jc;X=0;for(jc=ic.length;X<jc;++X)ic[X]=143>=X?8:255>=X?9:279>=X?7:8;hc=V(ic);var kc;const lc=new Uint8Array(30);let mc,nc;mc=0;for(nc=lc.length;mc<nc;++mc)lc[mc]=5;kc=V(lc);function Y(a,b){let c=a.B,d=a.l;const e=a.A;let f=a.j;if(f+(b-d+7>>3)>=e.length)throw Error("input buffer is broken");for(;d<b;)c|=e[f++]<<d,d+=8;a.B=c>>>b;a.l=d-b;a.j=f;return c&(1<<b)-1}\nfunction oc(a,b){let c=a.B,d=a.l;var e=a.A;let f=a.j;var g=e.length;const h=b[0];for(b=b[1];d<b&&!(f>=g);)c|=e[f++]<<d,d+=8;e=h[c&(1<<b)-1];g=e>>>16;if(g>d)throw Error("invalid code length: "+g);a.B=c>>g;a.l=d-g;a.j=f;return e&65535}\nfunction pc(a,b,c){let d=a.h,e=a.g;a.$=b;const f=d.length-258;var g;let h,k;for(;256!==(g=oc(a,b));)if(256>g)e>=f&&(a.g=e,d=qc(a),e=a.g),d[e++]=g;else for(g-=257,k=dc[g],0<ec[g]&&(k+=Y(a,ec[g])),g=oc(a,c),h=fc[g],0<gc[g]&&(h+=Y(a,gc[g])),e>=f&&(a.g=e,d=qc(a),e=a.g);k--;)d[e]=d[e++-h];for(;8<=a.l;)a.l-=8,a.j--;a.g=e}\nfunction rc(a,b,c){let d=a.h,e=a.g;a.$=b;let f=d.length;var g;let h,k;for(;256!==(g=oc(a,b));)if(256>g)e>=f&&(d=sc(a),f=d.length),d[e++]=g;else for(g-=257,k=dc[g],0<ec[g]&&(k+=Y(a,ec[g])),g=oc(a,c),h=fc[g],0<gc[g]&&(h+=Y(a,gc[g])),e+k>f&&(d=sc(a),f=d.length);k--;)d[e]=d[e++-h];for(;8<=a.l;)a.l-=8,a.j--;a.g=e}function qc(a){const b=new Uint8Array(a.g-32768),c=a.g-32768,d=a.h;b.set(d.subarray(32768,b.length));a.D.push(b);a.J+=b.length;d.set(d.subarray(c,c+32768));a.g=32768;return d}\nfunction sc(a,b){let c=Math.trunc(a.A.length/a.j+1);const d=a.A,e=a.h;b&&("number"===typeof b.P&&(c=b.P),"number"===typeof b.ba&&(c+=b.ba));2>c?(b=(d.length-a.j)/a.$[2],b=Math.trunc(b/2*258),b=b<e.length?e.length+b:e.length<<1):b=e.length*c;b=new Uint8Array(b);b.set(e);a.h=b;return a.h};function tc(a){var b;this.j=a;this.g=0;if(b||!(b={}))b.index&&(this.g=b.index),b.verify&&(this.verify=b.verify);const c=a[this.g++],d=a[this.g++];switch(c&15){case 8:this.method=8;break;default:throw Error("unsupported compression method");}if(0!==((c<<8)+d)%31)throw Error("invalid fcheck flag:"+((c<<8)+d)%31);if(d&32)throw Error("fdict flag is not supported");this.h=new ac(a,{index:this.g,bufferSize:b.bufferSize,m:b.m,resize:b.resize})}\nfunction uc(a){var b=a.j,c;a:{for(c=a.h;!c.W;){var d=void 0,e=void 0,f=void 0,g=void 0,h=c,k=Y(h,3);k&1&&(h.W=!0);k>>>=1;switch(k){case 0:k=h.A;e=h.j;var l=h.h,n=h.g;f=k.length;d=l.length;h.B=0;h.l=0;if(e+1>=f)throw Error("invalid uncompressed block header: LEN");g=k[e++]|k[e++]<<8;if(e+1>=f)throw Error("invalid uncompressed block header: NLEN");f=k[e++]|k[e++]<<8;if(g===~f)throw Error("invalid uncompressed block header: length verify");if(e+g>k.length)throw Error("input buffer is broken");switch(h.m){case bc:for(;n+\ng>l.length;)f=d-n,g-=f,l.set(k.subarray(e,e+f),n),n+=f,e+=f,h.g=n,l=qc(h),n=h.g;break;case W:for(;n+g>l.length;)l=sc(h,{P:2});break;default:throw Error("invalid inflate mode");}l.set(k.subarray(e,e+g),n);h.j=e+g;h.g=n+g;h.h=l;break;case 1:switch(h.m){case W:rc(h,hc,kc);break;case bc:pc(h,hc,kc);break;default:throw Error("invalid inflate mode");}break;case 2:k=Y(h,5)+257;d=Y(h,5)+1;l=Y(h,4)+4;n=new Uint8Array(cc.length);for(e=0;e<l;++e)n[cc[e]]=Y(h,3);n=V(n);l=new Uint8Array(k+d);e=0;for(d=k+d;e<d;)switch(f=\noc(h,n),f){case 16:for(f=3+Y(h,2);f--;)l[e++]=g;break;case 17:for(f=3+Y(h,3);f--;)l[e++]=0;g=0;break;case 18:for(f=11+Y(h,7);f--;)l[e++]=0;g=0;break;default:g=l[e++]=f}g=V(l.subarray(0,k));k=V(l.subarray(k));switch(h.m){case W:rc(h,g,k);break;case bc:pc(h,g,k);break;default:throw Error("invalid inflate mode");}break;default:throw Error("unknown BTYPE: "+k);}}switch(c.m){case bc:{h=0;g=c.h;k=c.D;l=new Uint8Array(c.J+(c.g-32768));let v;if(0===k.length)c=c.h.subarray(32768,c.g);else{n=0;for(d=k.length;n<\nd;++n)for(e=k[n],f=0,v=e.length;f<v;++f)l[h++]=e[f];n=32768;for(d=c.g;n<d;++n)l[h++]=g[n];c.D=[];c.buffer=l;c=c.buffer}}break a;case W:g=c.g;c.resize?(h=new Uint8Array(g),h.set(c.h.subarray(0,g))):h=c.h.subarray(0,g);c.buffer=h;c=c.buffer;break a;default:throw Error("invalid inflate mode");}}a.g=a.h.j;if(a.verify){a=(b[a.g++]<<24|b[a.g++]<<16|b[a.g++]<<8|b[a.g++])>>>0;b=c;if("string"===typeof b){b=[...b];h=0;for(g=b.length;h<g;h++)b[h]=(b[h].charPointAt(0)&255)>>>0;b=new Uint8Array([b])}h=1;g=0;k=\nb.length;for(l=0;0<k;){e=1024<k?1024:k;k-=e;do h+=b[l++],g+=h;while(--e);h%=65521;g%=65521}if(a!==(g<<16|h)>>>0)throw Error("invalid adler-32 checksum");}return c};const vc=({memory:a,messagePort:b,Y:c})=>function(d,e,f,g){if(a){d=new Uint8Array(a.buffer,g,f);d=I.decode(d);var h=/\\n$/g.test(d);e=/^\\n/g.test(d);var k=d.split("\\n").filter(n=>0<n.length),l=[];if(0===k.length&&h||e)l.push(c.join("")),U(c);k.forEach((n,v)=>{v+1===k.length?h?0===v?(l.push(c.join("")+n),U(c)):l.push(n):c.push(n):0===v?(l.push(c.join("")+n),U(c)):l.push(n)});l.forEach(n=>{n.replace(/(\\r\\n|\\n|\\r)/gm,"")&&b.K({log:n})})}},wc=a=>{if(a&&"object"===typeof a&&"object"===typeof a.exports){if(a.exports.__wasm_call_ctors){if(a.exports.csoundModuleCreate||\na.exports.csound_opcode_init||a.exports.csound_fgen_init)return!0;console.error(a.exports,"A csound plugin turns out to be neither a plugin, opcode or module.\\nPerhaps csdl.h or module.h wasn\'t imported correctly?");return!1}console.error("A csound plugin didn\'t export __wasm_call_ctors.\\nPlease re-run wasm-ld with either --export-all or include --export=__wasm_call_ctors");return!1}console.error("Error instantiating a csound plugin, instance and/or export is missing!");return!1},xc=a=>{function b(){let l=\n0,n=1;for(;;){const v=a[c++];l+=(v&127)*n;n*=128;if(!(v&128))break}return l}1836278016!==(new Uint32Array((new Uint8Array(a.subarray(0,24))).buffer))[0]&&console.error("Wasm magic number is missing!");if(0!==a[8])return sa(),"static";let c=9;const d=b();c++;c++;c++;c++;c++;c++;c++;c++;c+=3;const e=b(),f=b(),g=b(),h=b(),k=b();return{Eb:d,I:e,T:f,Ab:k,Z:g,Fb:h}},yc=async({Xa:a,i:b,messagePort:c})=>{const d=await WebAssembly.compile(a);a=new WebAssembly.Memory({initial:16384});const e=Wb(b,d);e.u=e.u||\n{};e.u.jb=()=>0;e.u.memory=a;e.u.lb=vc({memory:e.u.memory,Y:[],messagePort:c});c=await WebAssembly.instantiate(d,e);b.memory=a;b.start(c);c.exports.__wasi_js_csoundSetMessageStringCallback();return[c,b]};\nasync function zc({Ya:a,withPlugins:b=[],messagePort:c}){var d={};const e=new D;a=new Uint8Array(a);a=uc(new tc(a));var f=xc(a);if("static"===f)return await yc({messagePort:c,Xa:a,Ib:d,i:e});d=f.I;const g=f.T;f=f.Z;b=await b.reduce(async(w,u)=>{w=await w;let z,E;try{z=new Uint8Array(u),E=xc(z)}catch(M){console.error("Error in plugin",M)}E&&w.push({R:E,Za:z});return w},[]);d=Math.ceil((d+g)/65536);var h=Math.ceil(b.reduce((w,{R:u})=>"static"===u?0:w+(u.I+g),0)/65536);h=d+h+2048;const k=new WebAssembly.Memory({initial:h,\nmaximum:16384}),l=new WebAssembly.Table({initial:f+1,element:"anyfunc"});e.memory=k;const n=new WebAssembly.Global({value:"i32",mutable:!0},65536*h);f=new WebAssembly.Global({value:"i32",mutable:!0},65536*h);h=new WebAssembly.Global({value:"i32",mutable:!1},2048);const v=new WebAssembly.Global({value:"i32",mutable:!1},1),p=new WebAssembly.Global({value:"i32",mutable:!0},0);a=await WebAssembly.compile(a);const r=Wb(e,a);let y=[],B=d;r.env=r.env||{};r.env.memory=k;r.env.__indirect_function_table=l;\nr.env.__stack_pointer=n;r.env.__memory_base=h;r.env.__table_base=v;r.env.csoundLoadModules=w=>{y.forEach(u=>{if(void 0===C)console.error("csound-wasm internal: timing problem detected!");else{var z=C;if(u.exports.csoundModuleInit){var E=new WebAssembly.Global({value:"i32",mutable:!0},0),M=new WebAssembly.Global({value:"i32",mutable:!0},0),L=new WebAssembly.Global({value:"i32",mutable:!0},0);const ca=new WebAssembly.Global({value:"i32",mutable:!0},0);let x=l.length;"function"===typeof u.exports.csoundModuleCreate&&\n(l.grow(1),E.value=x,l.set(x,u.exports.csoundModuleCreate),x+=1);"function"===typeof u.exports.csoundModuleInit&&(l.grow(1),M.value=x,l.set(x,u.exports.csoundModuleInit),x+=1);"function"===typeof u.exports.csoundModuleDestroy&&(l.grow(1),L.value=x,l.set(x,u.exports.csoundModuleDestroy),x+=1);"function"===typeof u.exports.csoundModuleErrorCodeToString&&(l.grow(1),ca.value=x,l.set(x,u.exports.csoundModuleErrorCodeToString));z.exports.csoundWasiLoadPlugin(w,E,M,L,ca)}else u.exports.csound_opcode_init||\nu.exports.csound_fgen_init?(E=new WebAssembly.Global({value:"i32",mutable:!0},0),M=new WebAssembly.Global({value:"i32",mutable:!0},0),L=l.length,"function"===typeof u.exports.csound_opcode_init&&(E.value=L,l.grow(1),l.set(L,u.exports.csound_opcode_init),L+=1),"function"===typeof u.exports.csound_fgen_init&&(M.value=L,l.grow(1),l.set(L,u.exports.csound_fgen_init)),z.exports.csoundWasiLoadOpcodeLibrary(w,M,E)):console.error("Plugin doesn\'t export nececcary functions to quality as csound plugin.")}});\nreturn 0};r.env.csoundLoadExternals=()=>{};r.env._ZTH5errno=function(){};r.env.csoundWasiJsMessageCallback=vc({memory:k,messagePort:c,Y:[]});r.env.printDebugCallback=(w,u)=>{w=new Uint8Array(k.buffer,w,u);w=I.decode(w);console.log(w)};r["GOT.mem"]=r["GOT.mem"]||{};r["GOT.mem"].__heap_base=f;r["GOT.func"]=r["GOT.func"]||{};const C=await WebAssembly.instantiate(a,r);c=Object.assign({},C.exports);a={};c.memory=k;a.exports=c;y=await b.reduce(async(w,{R:u,Za:z})=>{w=await w;try{const E=u.I,M=u.T,L=u.Z,\nca=await WebAssembly.compile(z),x=Wb(e,ca),Cc=new WebAssembly.Global({value:"i32",mutable:!1},65536*B);l.grow(L);x.env=Object.assign({},x.env);x.env.memory=k;x.env.__indirect_function_table=l;x.env.__memory_base=Cc;x.env.__stack_pointer=n;x.env.__table_base=v;x.env.csoundLoadModules=p;delete x.env.csoundWasiJsMessageCallback;B+=Math.ceil((E+M)/65536);const Ia=await WebAssembly.instantiate(ca,x);wc(Ia)&&(Ia.exports.__wasm_call_ctors(),w.push(Ia))}catch(E){console.error("Error while compiling csound-plugin",\nE)}return w},[]);e.start(a);a.exports.__wasi_js_csoundSetMessageStringCallback();return[a,e]};let Ac,Bc=()=>{};\nconst Z=[],Dc=(a,b)=>{for(let c=0;c<b;++c)a.buffers.push(new Float64Array(16384))},Ec=({H:a,L:b,M:c,ea:d,inputChannelCount:e})=>f=>{const g=f.csound;f=a.csoundGetInputName(g).includes("adc");const h=a.csoundGetNchnls(g),k=0<e?e:f?a.csoundGetNchnlsInput(g):0,l=a.csoundGet0dBFS(g);f=a.csoundGetSpout(g);const n=a.csoundGetKsmps(g);let v=new Float64Array(b.i.memory.buffer,a.csoundGetSpin(g),n*k),p=new Float64Array(b.i.memory.buffer,f,n*h),r=0,y=0;c.o("realtimePerformanceStarted");Bc=({U:B})=>{const C=\nua(h,B),w=0<d.buffers.length&&d.s>=B;0<Z.length&&(Z.forEach(u=>{a.csoundPushMidiMessage(g,u[0],u[1],u[2])}),U(Z));for(let u=0;u<B;u++){y=(y+1)%n;if("realtimePerformanceEnded"===c.C)return 0===r&&(r=a.csoundPerformKsmps(g)),c.o("realtimePerformanceEnded"),Bc=()=>{},U(Z),d.port=void 0,{F:u};if(0===y&&0===r&&(r=a.csoundPerformKsmps(g),0!==r))return c.o("realtimePerformanceEnded"),Bc=()=>{},U(Z),d.port=void 0,{F:u};0===v.length&&(v=new Float64Array(b.i.memory.buffer,a.csoundGetSpin(g),n*k));0===p.length&&\n(p=new Float64Array(b.i.memory.buffer,a.csoundGetSpout(g),n*h));C.forEach((z,E)=>{0<p.length&&(z[u]=(p[y*h+E]||0)/l)});if(w)for(let z=0;z<k;z++)v[y*k+z]=(d.buffers[z][u+d.G%16384]||0)*l}w&&(d.s-=B,d.G+=B%16384);return{fa:C,F:0}}},Fc=({port:a})=>{H()();const b=new qa;b.port=a;b.K=c=>{a.postMessage({log:c})};b.o=c=>{b.C=c;const d={};d.playStateChange=c;a.postMessage(d)};b.aa=!0;return b},Gc=(a,b)=>{H()();a.addEventListener("message",c=>{var d="realtimePerformanceEnded"!==b.C?Bc({U:c.data.numFrames}):\nvoid 0;const {F:e=0,fa:f}=d||{};d={};d.numFrames=c.data.U-e;d.audioPacket=f;a.postMessage({...d,...c.data})});a.start()},Hc=({port:a})=>{H()();const b={s:0,buffers:[],G:0,v:0,port:a};b.port.addEventListener("message",({data:c})=>{0===b.buffers.length&&Dc(b,c.length);b.buffers.forEach((d,e)=>{d.set(c[e],b.v)});b.v+=c[0].length;b.s+=c[0].length;16384<=b.v&&(b.v=0)});b.port.start();return b},Ic=a=>{H()();a.addEventListener("message",({data:b})=>{Z.push(b)});a.start()};\nha({initialize:async a=>{var b=a.audioInputPort;const c=a.inputChannelCount;var d=a.messagePort;const e=a.outputChannelCount,f=a.requestPort,g=a.rtmidiPort,h=a.sampleRate,k=a.wasmDataURI,l=a.wasmTransformerDataURI;a=a.withPlugins||[];H()();const n=Fc({port:d}),v=Hc({port:b});Gc(f,n);Ic(g);const [p,r]=await zc({Ya:k,Jb:l,withPlugins:a,messagePort:n});p.i=r;const y=Pb(p);Ac=new Map(Object.entries({...y,csoundStart:(B,C)=>ta(n,y,Ec({ea:v,inputChannelCount:c,H:y,outputChannelCount:e,sampleRate:h,L:p,\ni:r,M:n}),va({inputChannelCount:c,H:y,outputChannelCount:e,L:p,M:n}))(C),L:p}));b=y.csoundCreate();h&&(d=y.csoundSetOption(b,"--sample-rate="+h),0!==d&&console.error("csoundSetOption sample-rate failed:",d));e&&(d=y.csoundSetOption(b,"--nchnls="+e),0!==d&&console.error("csoundSetOption nchnls failed:",d));c&&(d=y.csoundSetOption(b,"--nchnls_i="+c),0!==d&&console.error("csoundSetOption nchnls_i failed:",d));n.port.addEventListener("message",B=>{B.data&&B.data.newPlayState&&("realtimePerformanceEnded"===\nB.data.newPlayState&&n.o("realtimePerformanceEnded"),n.C=B.data.newPlayState)});n.port.start();return b},callUncloned:async(a,b)=>(a=Ac.get(a))&&a.apply({},b||[])});}).call(this);\n//# sourceMappingURL=__compiled.vanilla.worker.js.map\n',
    ]),
  );
